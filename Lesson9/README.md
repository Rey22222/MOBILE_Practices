# Практическая работа №9

**Тема:** Проектирование приложения в парадигме Clean Architecture. Use-case диаграмма, декомпозиция на слои (presentation/domain/data) и реализация каркаса приложения.

---

## Цель работы
Закрепить навыки:
* проектирования сценариев использования (Use Case) и выделения акторов;
* декомпозиции мобильного приложения на слои **presentation / domain / data**;
* применения принципа **Dependency Rule** (Правило зависимостей) и инверсии зависимостей;
* реализации каркаса приложения с use-case классами и репозиториями;
* сохранения данных через `SharedPreferences` с соблюдением архитектурной изоляции.

---

## Проектирование приложения (Succuforest)

### USE-CASE диаграмма
Для интернет-магазина суккулентов **Succuforest** были выделены два основных актора:
1. **Гость** — имеет доступ к базовому функционалу: просмотр каталога растений, поиск конкретного суккулента по ID, использование функции определения вида растения (AI) и инициация входа в систему.
2. **Авторизованный пользователь** — наследует права гостя, но дополнительно может добавлять товары в корзину/избранное, оформлять заказы и сохранять историю покупок.

Ключевые сценарии использования (Use Cases), реализованные в каркасе:
* **Просмотр каталога:** Получение списка доступных суккулентов.
* **Просмотр товара:** Получение детальной информации (название, цена) по ID.
* **Авторизация:** Имитация входа пользователя (получение токена).
* **Определение типа (ML):** Имитация работы нейросети для распознавания вида суккулента.

Операция «Сохранение данных» проектируется как *Include* для сценариев, изменяющих состояние.

![Use-Case диаграмма](https://iimg.su/i/t0swHF)

### Разделение на слои
Архитектура приложения строго разделена на три слоя согласно принципам Clean Architecture:

1. **Presentation Layer:** Отвечает за взаимодействие с пользователем. Включает `MainActivity` (с обновленным дизайном в зеленых тонах, карточками и полями ввода), которая вызывает UseCase'ы и отображает результат.
2. **Domain Layer:** Ядро бизнес-логики. Содержит:
    * *Use Cases:* `LoginUseCase`, `GetSucculentCatalogUseCase`, `GetSucculentDetailsUseCase`, `DetermineSucculentTypeUseCase`.
    * *Models:* Сущность `Succulent`.
    * *Repository Interfaces:* Контракт `SucculentRepository`.
3. **Data Layer:** Отвечает за работу с данными. Содержит реализацию `SucculentRepositoryImpl`, которая на данном этапе использует заглушки (Stubs) и тестовые списки (Эхеверия, Алоэ, Хавортия) вместо реальной БД.

![Скриншот структуры проекта](https://iimg.su/i/BxnpYe)

---

## Реализация каркаса приложения

### Часть 1. Учебный проект (MovieProject)
В рамках практического задания был реализован базовый проект для работы с любимыми фильмами. Каркас построен на принципах чистой архитектуры:
* Слой **Domain** определяет интерфейс репозитория и бизнес-логику (сохранение и получение названия фильма), оставаясь полностью независимым от Android-библиотек.
* Слой **Data** реализует этот интерфейс, используя `SharedPreferences` для физического хранения данных. Зависимость направлена внутрь (Data зависит от Domain).
* Слой **Presentation** использует UseCase классы для связи UI и данных. Кнопки на экране инициируют сохранение текста из поля ввода или его чтение, при этом Activity не знает о деталях реализации.

![Ввод данных](https://s2.radikal.cloud/2025/12/29/imagee563b4630681c614.png)
![Сохранение данных](https://iimg.su/i/Bd4hKt)
![Просмотр данных](https://iimg.su/i/OzYno6)

### Часть 2. Индивидуальный проект (Succuforest)
Был создан проект `ru.mirea.khasanova.succuforest`, служащий каркасом для будущего интернет-магазина.

* **Структура:** Проект сразу разбит на пакеты `domain`, `data`, `presentation`.
* **Domain:** Реализованы 4 сценария использования (Каталог, Детали, Вход, AI).
* **Data:** Создан репозиторий с тестовыми данными. Реализован поиск по ID и имитация ответа сервера при авторизации.
* **Presentation:** Реализован UI с использованием стиля Material Design (зеленая цветовая гамма). Добавлена логика обработки ввода ID пользователя и отображения результатов в `CardView`.

Приложение успешно собирается, все слои изолированы. Use-case вызываются из Activity, проходят через абстракцию репозитория и возвращают данные из Data-слоя обратно в UI.

![Вход](https://iimg.su/i/5AuxNI)
![Каталог](https://iimg.su/i/nQAOeg)
![Пример поиска по ID](https://iimg.su/i/3ZI10n)
![Определение суккулента по фото](https://iimg.su/i/94l04D)


## Итоги
В ходе выполнения работы спроектирован и реализован архитектурный каркас мобильного приложения **Succuforest** в парадигме Clean Architecture.

1. Определены акторы и варианты использования.
2. Произведена декомпозиция на слои, соблюдено правило зависимостей (**Dependency Rule**).
3. Реализованы основные сущности и сценарии использования (Use Cases).
4. Созданы заглушки репозиториев, позволяющие тестировать бизнес-логику и UI без подключения реального бэкенда.
5. Продемонстрирована работа приложения: просмотр каталога, поиск по ID, имитация входа и ML-анализа.

Проект готов к дальнейшему масштабированию (подключению Room, Retrofit) без необходимости изменения кода в слое Domain.

---

**Выполнила:** Хасанова Рената  
**Группа:** БСБО-07-22
